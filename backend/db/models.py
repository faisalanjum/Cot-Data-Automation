
from sqlalchemy import String, String,DATETIME,Column, Float,Date,String
from sqlalchemy import ForeignKey,UniqueConstraint
from sqlalchemy import String
from sqlalchemy import String
from sqlalchemy.orm import declarative_base
from sqlalchemy.orm import relationship
from sqlalchemy import inspect,MetaData
from sqlalchemy.sql import func
import os

from dotenv import load_dotenv
load_dotenv()
meta_obj=MetaData(schema=os.getenv("POSTGRES_SCHEMA"))
Base=declarative_base(metadata=meta_obj)



class DisaggregatedFuturesOptions(Base):

    __tablename__="disaggregated_futures_options"

    Date=Column(Date,primary_key=True)
    Open_Interest_All=Column(String)
    Market_and_Exchange_Names=Column(String)
    CFTC_Contract_Market_Code=Column(String)
    CFTC_Market_Code=Column(String)
    CFTC_Region_Code=Column(String)
    CFTC_Commodity_Code=Column(String)
    Prod_Merc_Positions_Long_All=Column(String)
    Prod_Merc_Positions_Short_All=Column(String)
    Swap_Positions_Long_All=Column(String)
    Swap__Positions_Short_All=Column(String)
    Swap__Positions_Spread_All=Column(String)
    M_Money_Positions_Long_All=Column(String)
    M_Money_Positions_Short_All=Column(String)
    M_Money_Positions_Spread_All=Column(String)
    Other_Rept_Positions_Long_All=Column(String)
    Other_Rept_Positions_Short_All=Column(String)
    Other_Rept_Positions_Spread_All=Column(String)
    Tot_Rept_Positions_Long_All=Column(String)
    Tot_Rept_Positions_Short_All=Column(String)
    NonRept_Positions_Long_All=Column(String)
    NonRept_Positions_Short_All=Column(String)
    Open_Interest_Old=Column(String)
    Prod_Merc_Positions_Long_Old=Column(String)
    Prod_Merc_Positions_Short_Old=Column(String)
    Swap_Positions_Long_Old=Column(String)
    Swap__Positions_Short_Old=Column(String)
    Swap__Positions_Spread_Old=Column(String)
    M_Money_Positions_Long_Old=Column(String)
    M_Money_Positions_Short_Old=Column(String)
    M_Money_Positions_Spread_Old=Column(String)
    Other_Rept_Positions_Long_Old=Column(String)
    Other_Rept_Positions_Short_Old=Column(String)
    Other_Rept_Positions_Spread_Old=Column(String)
    Tot_Rept_Positions_Long_Old=Column(String)
    Tot_Rept_Positions_Short_Old=Column(String)
    NonRept_Positions_Long_Old=Column(String)
    NonRept_Positions_Short_Old=Column(String)
    Open_Interest_Other=Column(String)
    Prod_Merc_Positions_Long_Other=Column(String)
    Prod_Merc_Positions_Short_Other=Column(String)
    Swap_Positions_Long_Other=Column(String)
    Swap__Positions_Short_Other=Column(String)
    Swap__Positions_Spread_Other=Column(String)
    M_Money_Positions_Long_Other=Column(String)
    M_Money_Positions_Short_Other=Column(String)
    M_Money_Positions_Spread_Other=Column(String)
    Other_Rept_Positions_Long_Other=Column(String)
    Other_Rept_Positions_Short_Other=Column(String)
    Other_Rept_Positions_Spread_Other=Column(String)
    Tot_Rept_Positions_Long_Other=Column(String)
    Tot_Rept_Positions_Short_Other=Column(String)
    NonRept_Positions_Long_Other=Column(String)
    NonRept_Positions_Short_Other=Column(String)
    Change_in_Open_Interest_All=Column(String)
    Change_in_Prod_Merc_Long_All=Column(String)
    Change_in_Prod_Merc_Short_All=Column(String)
    Change_in_Swap_Long_All=Column(String)
    Change_in_Swap_Short_All=Column(String)
    Change_in_Swap_Spread_All=Column(String)
    Change_in_M_Money_Long_All=Column(String)
    Change_in_M_Money_Short_All=Column(String)
    Change_in_M_Money_Spread_All=Column(String)
    Change_in_Other_Rept_Long_All=Column(String)
    Change_in_Other_Rept_Short_All=Column(String)
    Change_in_Other_Rept_Spread_All=Column(String)
    Change_in_Tot_Rept_Long_All=Column(String)
    Change_in_Tot_Rept_Short_All=Column(String)
    Change_in_NonRept_Long_All=Column(String)
    Change_in_NonRept_Short_All=Column(String)
    Pct_of_Open_Interest_All=Column(Float)
    Pct_of_OI_Prod_Merc_Long_All=Column(Float)
    Pct_of_OI_Prod_Merc_Short_All=Column(Float)
    Pct_of_OI_Swap_Long_All=Column(Float)
    Pct_of_OI_Swap_Short_All=Column(Float)
    Pct_of_OI_Swap_Spread_All=Column(Float)
    Pct_of_OI_M_Money_Long_All=Column(Float)
    Pct_of_OI_M_Money_Short_All=Column(Float)
    Pct_of_OI_M_Money_Spread_All=Column(Float)
    Pct_of_OI_Other_Rept_Long_All=Column(Float)
    Pct_of_OI_Other_Rept_Short_All=Column(Float)
    Pct_of_OI_Other_Rept_Spread_All=Column(Float)
    Pct_of_OI_Tot_Rept_Long_All=Column(Float)
    Pct_of_OI_Tot_Rept_Short_All=Column(Float)
    Pct_of_OI_NonRept_Long_All=Column(Float)
    Pct_of_OI_NonRept_Short_All=Column(Float)
    Pct_of_Open_Interest_Old=Column(Float)
    Pct_of_OI_Prod_Merc_Long_Old=Column(Float)
    Pct_of_OI_Prod_Merc_Short_Old=Column(Float)
    Pct_of_OI_Swap_Long_Old=Column(Float)
    Pct_of_OI_Swap_Short_Old=Column(Float)
    Pct_of_OI_Swap_Spread_Old=Column(Float)
    Pct_of_OI_M_Money_Long_Old=Column(Float)
    Pct_of_OI_M_Money_Short_Old=Column(Float)
    Pct_of_OI_M_Money_Spread_Old=Column(Float)
    Pct_of_OI_Other_Rept_Long_Old=Column(Float)
    Pct_of_OI_Other_Rept_Short_Old=Column(Float)
    Pct_of_OI_Other_Rept_Spread_Old=Column(Float)
    Pct_of_OI_Tot_Rept_Long_Old=Column(Float)
    Pct_of_OI_Tot_Rept_Short_Old=Column(Float)
    Pct_of_OI_NonRept_Long_Old=Column(Float)
    Pct_of_OI_NonRept_Short_Old=Column(Float)
    Pct_of_Open_Interest_Other=Column(Float)
    Pct_of_OI_Prod_Merc_Long_Other=Column(Float)
    Pct_of_OI_Prod_Merc_Short_Other=Column(Float)
    Pct_of_OI_Swap_Long_Other=Column(Float)
    Pct_of_OI_Swap_Short_Other=Column(Float)
    Pct_of_OI_Swap_Spread_Other=Column(Float)
    Pct_of_OI_M_Money_Long_Other=Column(Float)
    Pct_of_OI_M_Money_Short_Other=Column(Float)
    Pct_of_OI_M_Money_Spread_Other=Column(Float)
    Pct_of_OI_Other_Rept_Long_Other=Column(Float)
    Pct_of_OI_Other_Rept_Short_Other=Column(Float)
    Pct_of_OI_Other_Rept_Spread_Other=Column(Float)
    Pct_of_OI_Tot_Rept_Long_Other=Column(Float)
    Pct_of_OI_Tot_Rept_Short_Other=Column(Float)
    Pct_of_OI_NonRept_Long_Other=Column(Float)
    Pct_of_OI_NonRept_Short_Other=Column(Float)
    Traders_Total_All=Column(String)
    Traders_Noncommercial_Long_All=Column(String)
    Traders_Noncommercial_Short_All=Column(String)
    Traders_Noncommercial_Spreading_All=Column(String)
    Traders_Commercial_Long_All=Column(String)
    Traders_Commercial_Short_All=Column(String)
    Traders_Total_Reportable_Long_All=Column(String)
    Traders_Total_Reportable_Short_All=Column(String)
    Traders_Total_Old=Column(String)
    Traders_Noncommercial_Long_Old=Column(String)
    Traders_Noncommercial_Short_Old=Column(String)
    Traders_Noncommercial_Spreading_Old=Column(String)
    Traders_Commercial_Long_Old=Column(String)
    Traders_Commercial_Short_Old=Column(String)
    Traders_Total_Reportable_Long_Old=Column(String)
    Traders_Total_Reportable_Short_Old=Column(String)
    Traders_Total_Other=Column(String)
    Traders_Noncommercial_Long_Other=Column(String)
    Traders_Noncommercial_Short_Other=Column(String)
    Traders_Noncommercial_Spreading_Other=Column(String)
    Traders_Commercial_Long_Other=Column(String)
    Traders_Commercial_Short_Other=Column(String)
    Traders_Total_Reportable_Long_Other=Column(String)
    Traders_Total_Reportable_Short_Other=Column(String)
    Concentration_Gross_LT__4_TDR_Long_All=Column(Float)
    Concentration_Gross_LT_4_TDR_Short_All=Column(Float)
    Concentration_Gross_LT_8_TDR_Long_All=Column(Float)
    Concentration_Gross_LT_8_TDR_Short_All=Column(Float)
    Concentration_Net_LT_4_TDR_Long_All=Column(Float)
    Concentration_Net_LT_4_TDR_Short_All=Column(Float)
    Concentration_Net_LT_8_TDR_Long_All=Column(Float)
    Concentration_Net_LT_8_TDR_Short_All=Column(Float)
    Concentration_Gross_LT_4_TDR_Long_Old=Column(Float)
    Concentration_Gross_LT_4_TDR_Short_Ol=Column(Float)
    Concentration_Gross_LT_8_TDR_Long_Old=Column(Float)
    Concentration_Gross_LT_8_TDR_Short_Old=Column(Float)
    Concentration_Net_LT_4_TDR_Long_Old=Column(Float)
    Concentration_Net_LT_4_TDR_Short_Old=Column(Float)
    Concentration_Net_LT_8_TDR_Long_Old=Column(Float)
    Concentration_Net_LT_8_TDR_Short_Old=Column(Float)
    Concentration_Gross_LT_4_TDR_Long_Other=Column(Float)
    Concentration_Gross_LT_4_TDR_ShortOther=Column(Float)
    Concentration_Gross_LT_8_TDR_Long_Other=Column(Float)
    Concentration_Gross_LT_8_TDR_ShortOther=Column(Float)
    Concentration_Net_LT_4_TDR_Long_Other=Column(Float)
    Concentration_Net_LT_4_TDR_Short_Other=Column(Float)
    Concentration_Net_LT_8_TDR_Long_Other=Column(Float)
    Concentration_Net_LT_8_TDR_Short_Other=Column(Float)
    Contract_Units=Column(String)
    CFTC_Contract_Market_Code_Quotes=Column(String)
    CFTC_Market_Code_in_Initials_Quotes=Column(String)
    CFTC_Commodity_Code_Quotes=Column(String)
    Report_Type=Column(String,primary_key=True)
    Market_Code=Column(String,primary_key=True)
    Prod_Merc_Positions_Long_All=Column(String)
    Prod_Merc_Positions_Short_All=Column(String)
    M_Money_Positions_Long_All=Column(String)
    M_Money_Positions_Short_All=Column(String)
    M_Money_Positions_Spread_All=Column(String)
    Tot_Rept_Positions_Long_All=Column(String)
    Tot_Rept_Positions_Short_All=Column(String)
    Change_in_Open_Interest_All=Column(Float)
    Change_in_Prod_Merc_Long_All=Column(Float)
    Change_in_Prod_Merc_Short_All=Column(Float)
    Change_in_M_Money_Long_All=Column(Float)
    Change_in_M_Money_Short_All=Column(Float)
    Pct_of_Open_Interest_All=Column(Float)
    Pct_of_OI_Prod_Merc_Long_All=Column(Float)
    Pct_of_OI_Prod_Merc_Short_All=Column(Float)
    Pct_of_OI_M_Money_Long_All=Column(Float)
    Pct_of_OI_M_Money_Short_All=Column(Float)
    Pct_of_OI_M_Money_Spread_All=Column(Float)
    Net_Spec_Length=Column(String)
    Pct_of_OI_MM_NSL=Column(Float)
    Market_Code=Column(String,primary_key=True)
    Report_Type=Column(String,primary_key=True)
    

    def toDict(self):
        return { c.key: getattr(self, c.key) for c in inspect(self).mapper.column_attrs }

    # __table_args__ = (UniqueConstraint('name', 'id','period','date',"value","frequency","created_at"),)



class Legacy(Base):
    __tablename__="legacy"
    
    Date=Column(Date,primary_key=True)
    Market_and_Exchange_Names=Column(String)
    CFTC_Contract_Market_Code=Column(String)
    CFTC_Market_Code_in_Initials=Column(String)
    CFTC_Region_Code=Column(String)
    CFTC_Commodity_Code=Column(String)
    Open_Interest_All=Column(String)
    Noncommercial_Positions_Long_All=Column(String)
    Noncommercial_Positions_Short_All=Column(String)
    Noncommercial_Positions_Spreading_All=Column(String)
    Commercial_Positions_Long_All=Column(String)
    Commercial_Positions_Short_All=Column(String)
    Total_Reportable_Positions_Long_All=Column(String)
    Total_Reportable_Positions_Short_All=Column(String)
    Nonreportable_Positions_Long_All=Column(String)
    Nonreportable_Positions_Short_All=Column(String)
    Open_Interest_Old=Column(String)
    Noncommercial_Positions_Long_Old=Column(String)
    Noncommercial_Positions_Short_Old=Column(String)
    Noncommercial_Positions_Spreading_Old=Column(String)
    Commercial_Positions_Long_Old=Column(String)
    Commercial_Positions_Short_Old=Column(String)
    Total_Reportable_Positions_Long_Old=Column(String)
    Total_Reportable_Positions_Short_Old=Column(String)
    Nonreportable_Positions_Long_Old=Column(String)
    Nonreportable_Positions_Short_Old=Column(String)
    Open_Interest_Other=Column(String)
    Noncommercial_Positions_Long_Other=Column(String)
    Noncommercial_Positions_Short_Other=Column(String)
    Noncommercial_Positions_Spreading_Other=Column(String)
    Commercial_Positions_Long_Other=Column(String)
    Commercial_Positions_Short_Other=Column(String)
    Total_Reportable_Positions_Long_Other=Column(String)
    Total_Reportable_Positions_Short_Other=Column(String)
    Nonreportable_Positions_Long_Other=Column(String)
    Nonreportable_Positions_Short_Other=Column(String)
    Change_in_Open_Interest_All=Column(String)
    Change_in_Noncommercial_Long_All=Column(String)
    Change_in_Noncommercial_Short_All=Column(String)
    Change_in_Noncommercial_Spreading_All=Column(String)
    Change_in_Commercial_Long_All=Column(String)
    Change_in_Commercial_Short_All=Column(String)
    Change_in_Total_Reportable_Long_All=Column(String)
    Change_in_Total_Reportable_Short_All=Column(String)
    Change_in_Nonreportable_Long_All=Column(String)
    Change_in_Nonreportable_Short_All=Column(String)
    Per_of_Open_Interest_OI_All=Column(Float)
    Per_of_OI_Noncommercial_Long_All=Column(Float)
    Per_of_OI_Noncommercial_Short_All=Column(Float)
    Per_of_OI_Noncommercial_Spreading_All=Column(Float)
    Per_of_OI_Commercial_Long_All=Column(Float)
    Per_of_OI_Commercial_Short_All=Column(Float)
    Per_of_OI_Total_Reportable_Long_All=Column(Float)
    Per_of_OI_Total_Reportable_Short_All=Column(Float)
    Per_of_OI_Nonreportable_Long_All=Column(Float)
    Per_of_OI_Nonreportable_Short_All=Column(Float)
    Per_of_Open_Interest_OIOld=Column(Float)
    Per_of_OI_Noncommercial_Long_Old=Column(Float)
    Per_of_OI_Noncommercial_Short_Old=Column(Float)
    Per_of_OI_Noncommercial_Spreading_Old=Column(Float)
    Per_of_OI_Commercial_Long_Old=Column(Float)
    Per_of_OI_Commercial_Short_Old=Column(Float)
    Per_of_OI_Total_Reportable_Long_Old=Column(Float)
    Per_of_OI_Total_Reportable_Short_Old=Column(Float)
    Per_of_OI_Nonreportable_Long_Old=Column(Float)
    Per_of_OI_Nonreportable_Short_Old=Column(Float)
    Per_of_Open_Interest_OI_Other=Column(Float)
    Per_of_OI_Noncommercial_Long_Other=Column(Float)
    Per_of_OI_Noncommercial_Short_Other=Column(Float)
    Per_of_OI_Noncommercial_Spreading_Other=Column(Float)
    Per_of_OI_Commercial_Long_Other=Column(Float)
    Per_of_OI_Commercial_Short_Other=Column(Float)
    Per_of_OI_Total_Reportable_Long_Other=Column(Float)
    Per_of_OI_Total_Reportable_Short_Other=Column(Float)
    Per_of_OI_Nonreportable_Long_Other=Column(Float)
    Per_of_OI_Nonreportable_Short_Other=Column(Float)
    Traders_Total_All=Column(String)
    Traders_Noncommercial_Long_All=Column(String)
    Traders_Noncommercial_Short_All=Column(String)
    Traders_Noncommercial_Spreading_All=Column(String)
    Traders_Commercial_Long_All=Column(String)
    Traders_Commercial_Short_All=Column(String)
    Traders_Total_Reportable_Long_All=Column(String)
    Traders_Total_Reportable_Short_All=Column(String)
    Traders_Total_Old=Column(String)
    Traders_Noncommercial_Long_Old=Column(String)
    Traders_Noncommercial_Short_Old=Column(String)
    Traders_Noncommercial_Spreading_Old=Column(String)
    Traders_Commercial_Long_Old=Column(String)
    Traders_Commercial_Short_Old=Column(String)
    Traders_Total_Reportable_Long_Old=Column(String)
    Traders_Total_Reportable_Short_Old=Column(String)
    Traders_Total_Other=Column(String)
    Traders_Noncommercial_Long_Other=Column(String)
    Traders_Noncommercial_Short_Other=Column(String)
    Traders_Noncommercial_Spreading_Other=Column(String)
    Traders_Commercial_Long_Other=Column(String)
    Traders_Commercial_Short_Other=Column(String)
    Traders_Total_Reportable_Long_Other=Column(String)
    Traders_Total_Reportable_Short_Other=Column(String)
    Concentration_Gross_LT__4_TDR_Long_All=Column(Float)
    Concentration_Gross_LT_4_TDR_Short_All=Column(Float)
    Concentration_Gross_LT_8_TDR_Long_All=Column(Float)
    Concentration_Gross_LT_8_TDR_Short_All=Column(Float)
    Concentration_Net_LT_4_TDR_Long_All=Column(Float)
    Concentration_Net_LT_4_TDR_Short_All=Column(Float)
    Concentration_Net_LT_8_TDR_Long_All=Column(Float)
    Concentration_Net_LT_8_TDR_Short_All=Column(Float)
    Concentration_Gross_LT_4_TDR_Long_Old=Column(Float)
    Concentration_Gross_LT_4_TDR_Short_Ol=Column(Float)
    Concentration_Gross_LT_8_TDR_Long_Old=Column(Float)
    Concentration_Gross_LT_8_TDR_Short_Old=Column(Float)
    Concentration_Net_LT_4_TDR_Long_Old=Column(Float)
    Concentration_Net_LT_4_TDR_Short_Old=Column(Float)
    Concentration_Net_LT_8_TDR_Long_Old=Column(Float)
    Concentration_Net_LT_8_TDR_Short_Old=Column(Float)
    Concentration_Gross_LT_4_TDR_Long_Other=Column(Float)
    Concentration_Gross_LT_4_TDR_ShortOther=Column(Float)
    Concentration_Gross_LT_8_TDR_Long_Other=Column(Float)
    Concentration_Gross_LT_8_TDR_ShortOther=Column(Float)
    Concentration_Net_LT_4_TDR_Long_Other=Column(Float)
    Concentration_Net_LT_4_TDR_Short_Other=Column(Float)
    Concentration_Net_LT_8_TDR_Long_Other=Column(Float)
    Concentration_Net_LT_8_TDR_Short_Other=Column(Float)
    Contract_Units=Column(String)
    CFTC_Contract_Market_Code_Quotes=Column(String)
    CFTC_Market_Code_in_Initials_Quotes=Column(String)
    CFTC_Commodity_Code_Quotes=Column(String)
    Report_Type=Column(String,primary_key=True)
    Market_Code=Column(String,primary_key=True)

    def toDict(self):
        return { c.key: getattr(self, c.key) for c in inspect(self).mapper.column_attrs }


